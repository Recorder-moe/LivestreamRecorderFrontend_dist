"use strict";(self.webpackChunklivestream_recorder=self.webpackChunklivestream_recorder||[]).push([[149],{6149:(Bn,L,h)=>{h.r(L),h.d(L,{PageModule:()=>An});var f=h(6895),t=h(4650);let N=(()=>{class o{static isString(e){return"string"==typeof e||e instanceof String}static caseInsensitiveSort(e,n){return o.isString(e)&&o.isString(n)?e.localeCompare(n):o.defaultCompare(e,n)}static defaultCompare(e,n){return e&&e instanceof Date&&(e=e.getTime()),n&&n instanceof Date&&(n=n.getTime()),e===n?0:null==e?1:null==n?-1:e>n?1:-1}static parseExpression(e){return(e=(e=e.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split(".")}static getValue(e,n){for(let r=0,a=n.length;r<a;++r){if(!e)return;const s=n[r];if(!(s in e))return;e="function"==typeof e[s]?e[s]():e[s]}return e}static setValue(e,n,r){let a;for(a=0;a<r.length-1;a++)e=e[r[a]];e[r[a]]=n}transform(e,n,r,a=!1,s){return e&&(Array.isArray(n)?this.multiExpressionTransform(e,n.slice(),r,a,s):Array.isArray(e)?this.sortArray(e.slice(),n,r,a,s):"object"==typeof e?this.transformObject(Object.assign({},e),n,r,a,s):e)}sortArray(e,n,r,a,s){const l=n&&-1!==n.indexOf(".");let c;l&&(n=o.parseExpression(n)),c=s&&"function"==typeof s?s:a?o.caseInsensitiveSort:o.defaultCompare;const d=e.sort((u,m)=>n?l?c(o.getValue(u,n),o.getValue(m,n)):u&&m?c(u[n],m[n]):c(u,m):c(u,m));return r?d.reverse():d}transformObject(e,n,r,a,s){const l=o.parseExpression(n);let c=l.pop(),d=o.getValue(e,l);return Array.isArray(d)||(l.push(c),c=null,d=o.getValue(e,l)),d&&o.setValue(e,this.transform(d,c,r,a),l),e}multiExpressionTransform(e,n,r,a=!1,s){return n.reverse().reduce((l,c)=>this.transform(l,c,r,a,s),e)}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275pipe=t.Yjl({name:"orderBy",type:o,pure:!1}),o})(),me=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[N]}),o})();var g=h(4006),fe=h(8929);let Ue=(()=>{class o{constructor(e){this.document=e,this.width=this.getWidth()}getWidth(){const e=this.document.createElement("div");e.style.visibility="hidden",e.style.width="100px",e.style.msOverflowStyle="scrollbar",this.document.body.appendChild(e);const n=e.offsetWidth;e.style.overflow="scroll";const r=this.document.createElement("div");r.style.width="100%",e.appendChild(r);const a=r.offsetWidth;return e.parentNode.removeChild(e),n-a}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(f.K0))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac}),o})(),Le=(()=>{class o{getDimensions(e){return e.getBoundingClientRect()}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac}),o})(),Ne=(()=>{class o{constructor(){this.columnInputChanges=new fe.xQ}get columnInputChanges$(){return this.columnInputChanges.asObservable()}onInputChange(){this.columnInputChanges.next()}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac}),o})();const V={},$=typeof document<"u"?document.createElement("div").style:void 0,z=function(){const o=typeof window<"u"?window.getComputedStyle(document.documentElement,""):void 0,i=typeof o<"u"?Array.prototype.slice.call(o).join("").match(/-(moz|webkit|ms)-/):null,e=null!==i?i[1]:void 0,n=typeof e<"u"?"WebKit|Moz|MS|O".match(new RegExp("("+e+")","i"))[1]:void 0;return n?{dom:n,lowercase:e,css:`-${e}-`,js:e[0].toUpperCase()+e.substr(1)}:void 0}();function B(o){const i=function Z(o){return(o=(o=(o=o.replace(/[^a-zA-Z0-9 ]/g," ")).replace(/([a-z](?=[A-Z]))/g,"$1 ")).replace(/([^a-zA-Z0-9 ])|^[0-9]+/g,"").trim().toLowerCase()).replace(/([ 0-9]+)([a-zA-Z])/g,function(i,e,n){return e.trim()+n.toUpperCase()})}(o);return V[i]||(void 0!==z&&void 0!==$[z.css+o]?V[i]=z.css+o:void 0!==$[o]&&(V[i]=o)),V[i]}typeof window<"u"&&B("transform"),typeof window<"u"&&B("backfaceVisibility"),typeof window<"u"&&B("transform"),typeof window<"u"&&B("perspective");const G=typeof window<"u"?window.navigator.userAgent:"Chrome";/Safari\//.test(G)&&/Chrome\//.test(G);let lt=(()=>{class o{static forRoot(e){return{ngModule:o,providers:[{provide:"configuration",useValue:e}]}}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[Ue,Le,Ne],imports:[[f.ez]]}),o})();typeof document<"u"&&!document.elementsFromPoint&&(document.elementsFromPoint=function ct(o,i){const e=[],n=[];let r,a,s;for(;(r=document.elementFromPoint(o,i))&&-1===e.indexOf(r)&&null!=r;)e.push(r),n.push({value:r.style.getPropertyValue("pointer-events"),priority:r.style.getPropertyPriority("pointer-events")}),r.style.setProperty("pointer-events","none","important");for(a=n.length;s=n[--a];)e[a].style.setProperty("pointer-events",s.value?s.value:"",s.priority);return e});var dt=h(671),_=h(5861);function X(o){var i,e,n,r=2;for(typeof Symbol<"u"&&(e=Symbol.asyncIterator,n=Symbol.iterator);r--;){if(e&&null!=(i=o[e]))return i.call(o);if(n&&null!=(i=o[n]))return new F(i.call(o));e="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function F(o){function i(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var n=e.done;return Promise.resolve(e.value).then(function(r){return{value:r,done:n}})}return(F=function(n){this.s=n,this.n=n.next}).prototype={s:null,n:null,next:function(){return i(this.n.apply(this.s,arguments))},return:function(n){var r=this.s.return;return void 0===r?Promise.resolve({value:n,done:!0}):i(r.apply(this.s,arguments))},throw:function(n){var r=this.s.return;return void 0===r?Promise.reject(n):i(r.apply(this.s,arguments))}},new F(o)}var y=h(2107),w=h(7595),k=h(7006),M=h(2959),C=h(8423),T=h(2975),D=h(7480),b=h(911);function ut(o,i){if(1&o&&(t.TgZ(0,"span",15),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.Q6J("ngClass","ribbon-"+e.ribbonColor),t.xp6(1),t.hij("",e.ribbon," ")}}const pt=function(o){return["/channels",o]};let J=(()=>{class o{constructor(e){this.configService=e}ngOnInit(){this.blobstorage_public=this.configService.environment.blobstorage_public,this.channel.Avatar&&(this.avatarAvif=this.channel.Avatar.substring(0,this.channel.Avatar.lastIndexOf("."))+".avif")}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(D.E))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-channel-card"]],inputs:{channel:"channel",ribbon:"ribbon",ribbonColor:"ribbonColor"},decls:20,vars:12,consts:[[1,"channel-card",3,"routerLink"],["type","image/avif",3,"srcset"],["alt","Channel Avatar",1,"avatar",3,"src"],[1,"card","text-center"],[1,"card-body"],[1,"mb-0"],[1,"grey","mb-0"],[1,"d-flex","justify-content-center","align-items-center","mt-3","grey","text-bold-400"],[1,"dash-ratings"],[1,"d-flex","justify-content-center","align-items-center"],["type","button",1,"btn","btn-outline-light","px-2"],[1,"ft-clock"],[1,"ml-2"],[1,"mb-0","font-medium-2","nowarp"],["class","ribbon",3,"ngClass",4,"ngIf"],[1,"ribbon",3,"ngClass"]],template:function(e,n){1&e&&(t.TgZ(0,"a",0)(1,"picture"),t._UZ(2,"source",1)(3,"img",2),t.qZA(),t.TgZ(4,"div",3)(5,"div",4)(6,"h4",5),t._uU(7),t.qZA(),t.TgZ(8,"p",6),t._uU(9),t.qZA(),t.TgZ(10,"div",7)(11,"div",8)(12,"div",9)(13,"button",10),t._UZ(14,"i",11),t.qZA(),t.TgZ(15,"div",12)(16,"div",13),t._uU(17),t.ALo(18,"date"),t.qZA()()()()()(),t.YNc(19,ut,2,2,"span",14),t.qZA()()),2&e&&(t.Q6J("routerLink",t.VKq(10,pt,n.channel.id)),t.xp6(2),t.Q6J("srcset",n.blobstorage_public+"/avatar/"+n.avatarAvif,t.LSH),t.xp6(1),t.Q6J("src",n.blobstorage_public+"/avatar/"+n.channel.Avatar,t.LSH),t.xp6(4),t.Oqu(n.channel.ChannelName),t.xp6(2),t.hij("@",n.channel.Source,""),t.xp6(8),t.hij(" ",t.xi3(18,7,null==n.channel.LatestVideo?null:n.channel.LatestVideo.ArchivedTime,"MM / dd")," "),t.xp6(2),t.Q6J("ngIf",n.ribbon))},dependencies:[b.yS,f.mk,f.O5,f.uU],styles:['.channel-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-top:58%}.channel-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:30px}.channel-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .ribbon[_ngcontent-%COMP%]{color:#fff;display:block;width:calc(100% + 20px);height:50px;line-height:50px;text-align:center;margin-left:-10px;margin-right:-10px;background:#B583FF;position:relative;top:-15px}.channel-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .ribbon[_ngcontent-%COMP%]:before, .channel-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .ribbon[_ngcontent-%COMP%]:after{content:"";position:absolute}.channel-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .ribbon[_ngcontent-%COMP%]:before{height:0;width:0;bottom:-10px;left:0;border-top:10px solid #3B1C93;border-left:10px solid transparent}.channel-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .ribbon[_ngcontent-%COMP%]:after{height:0;width:0;right:0;bottom:-10px;border-top:10px solid #3B1C93;border-right:10px solid transparent}.channel-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .ribbon-primary[_ngcontent-%COMP%]{background:#B583FF}.channel-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .ribbon-primary[_ngcontent-%COMP%]:before, .channel-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .ribbon-primary[_ngcontent-%COMP%]:after{border-top:10px solid #3B1C93}.channel-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .ribbon-secondary[_ngcontent-%COMP%]{background:#8F9DB8}.channel-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .ribbon-secondary[_ngcontent-%COMP%]:before, .channel-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .ribbon-secondary[_ngcontent-%COMP%]:after{border-top:10px solid #1E294F}.channel-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .ribbon-success[_ngcontent-%COMP%]{background:#6CD975}.channel-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .ribbon-success[_ngcontent-%COMP%]:before, .channel-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .ribbon-success[_ngcontent-%COMP%]:after{border-top:10px solid #146F3E}.channel-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .ribbon-danger[_ngcontent-%COMP%]{background:#F9877C}.channel-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .ribbon-danger[_ngcontent-%COMP%]:before, .channel-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .ribbon-danger[_ngcontent-%COMP%]:after{border-top:10px solid #8E1A38}.channel-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .ribbon-warning[_ngcontent-%COMP%]{background:#FAA750}.channel-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .ribbon-warning[_ngcontent-%COMP%]:before, .channel-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .ribbon-warning[_ngcontent-%COMP%]:after{border-top:10px solid #8F2F07}.channel-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .ribbon-info[_ngcontent-%COMP%]{background:#60AFF0}.channel-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .ribbon-info[_ngcontent-%COMP%]:before, .channel-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .ribbon-info[_ngcontent-%COMP%]:after{border-top:10px solid #0E3885}.channel-card[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:60%;border:3px solid transparent;background-clip:padding-box,border-box;background-origin:padding-box,border-box;background-image:linear-gradient(to right,#2E333B,#2E333B),linear-gradient(90deg,#975AFF,#2F8BE6);padding:.4rem;position:absolute;right:0;left:0;margin:auto;display:inline-block;overflow:hidden;z-index:1;line-height:40px;transition:.3s;vertical-align:middle;font-size:1rem;box-shadow:0 2px 2px #00000024,0 1px 5px #0000001f,0 3px 1px -2px #0003}.channel-card[_ngcontent-%COMP%] > .card[_ngcontent-%COMP%]{border:3px solid transparent!important}.channel-card[_ngcontent-%COMP%] > .border-danger[_ngcontent-%COMP%]{background-clip:padding-box,border-box!important;background-origin:padding-box,border-box!important;background-image:linear-gradient(to right,#2E333B,#2E333B),linear-gradient(90deg,#F55252,#F77E17)!important}.nowarp[_ngcontent-%COMP%]{white-space:nowrap}']}),o})(),j=(()=>{class o{constructor(){this.VideoStatus=w.K}ngOnInit(){}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-status-badge"]],inputs:{videoStatus:"videoStatus"},decls:3,vars:11,consts:[[1,"tags"],[1,"badge"]],template:function(e,n){1&e&&(t.TgZ(0,"span",0)(1,"span",1),t._uU(2),t.qZA()()),2&e&&(t.xp6(1),t.ekj("bg-primary",n.videoStatus<=n.VideoStatus.Scheduled)("bg-secondary",n.videoStatus==n.VideoStatus.Pending||n.videoStatus==n.VideoStatus.Expired||n.videoStatus==n.VideoStatus.Missing||n.videoStatus==n.VideoStatus.Skipped||n.videoStatus==n.VideoStatus.Edited)("bg-success",n.videoStatus>=n.VideoStatus.Archived&&n.videoStatus<50||n.videoStatus==n.VideoStatus.Exist)("bg-warning",n.videoStatus>n.VideoStatus.WaitingToRecord&&n.videoStatus<40)("bg-danger",n.videoStatus==n.VideoStatus.Reject||n.videoStatus==n.VideoStatus.Error||n.videoStatus==n.VideoStatus.Deleted),t.xp6(1),t.Oqu(n.VideoStatus[n.videoStatus]))}}),o})();const ht=function(o,i,e){return[o,i,e]},K=function(o,i){return["/channels",o,"videos",i]},gt=function(o){return["/channels",o]};let ee=(()=>{class o{constructor(e){this.configService=e,this.VideoStatus=w.K}ngOnInit(){this.blobstorage_public=this.configService.environment.blobstorage_public,this.video?.Thumbnail?this.thumbnail=this.blobstorage_public+"/thumbnails/"+this.video.Thumbnail:this.video?.Channel?.Banner&&(this.thumbnail=this.blobstorage_public+"/banner/"+this.video.Channel.Banner),this.thumbnail&&(this.thumbnailAvif=this.thumbnail.substring(0,this.thumbnail.lastIndexOf("."))+".avif")}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(D.E))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-video-card"]],inputs:{video:"video"},decls:18,vars:27,consts:[[1,"card"],[1,"card-content"],[3,"routerLink"],["type","image/avif",3,"srcset"],["alt","Video Thumbnail",1,"img-fluid",3,"src"],[1,"card-header"],[1,"card-title","text-truncate"],[1,"card-footer","text-muted","pt-0"],[1,"float-left"],[1,"float-right",3,"videoStatus"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"a",2)(3,"picture"),t._UZ(4,"source",3)(5,"img",4),t.qZA()(),t.TgZ(6,"div",5)(7,"a",2)(8,"h4",6),t._uU(9),t.qZA()(),t.TgZ(10,"a",2)(11,"p"),t._uU(12),t.qZA()()()(),t.TgZ(13,"div",7)(14,"span",8),t._uU(15),t.ALo(16,"date"),t.qZA(),t._UZ(17,"app-status-badge",9),t.qZA()()),2&e&&(t.ekj("border-danger",t.kEZ(15,ht,n.VideoStatus.Edited,n.VideoStatus.Deleted,n.VideoStatus.Reject).includes(n.video.SourceStatus)),t.xp6(2),t.Q6J("routerLink",t.WLB(19,K,n.video.ChannelId,n.video.id)),t.xp6(2),t.Q6J("srcset",n.thumbnailAvif,t.LSH),t.xp6(1),t.Q6J("src",n.thumbnail,t.LSH),t.xp6(2),t.Q6J("routerLink",t.WLB(22,K,n.video.ChannelId,n.video.id)),t.xp6(2),t.Oqu(n.video.Title?n.video.Title:"(No Title)"),t.xp6(1),t.Q6J("routerLink",t.VKq(25,gt,n.video.ChannelId)),t.xp6(2),t.AsE(" ",""!==(null==n.video.Channel?null:n.video.Channel.ChannelName)?null==n.video.Channel?null:n.video.Channel.ChannelName:n.video.ChannelId," @ ",n.video.Source," "),t.xp6(3),t.Oqu(t.xi3(16,12,n.video.Timestamps.PublishedAt,"yyyy/MM/dd HH:mm:ss")),t.xp6(2),t.Q6J("videoStatus",n.video.Status))},dependencies:[b.yS,j,f.uU],styles:[".card.border-danger[_ngcontent-%COMP%]{border:3px solid transparent!important;background-clip:padding-box,border-box!important;background-origin:padding-box,border-box!important;background-image:linear-gradient(to right,#2E333B,#2E333B),linear-gradient(90deg,#F55252,#F77E17)!important}"]}),o})();var mt=h(9915);function ft(o,i){if(1&o&&(t.TgZ(0,"div",7),t._UZ(1,"app-channel-card",8),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("channel",e.channelLastVideo)}}function bt(o,i){if(1&o&&(t.TgZ(0,"div",7),t._UZ(1,"app-channel-card",8),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("channel",e.channelRandom[2])}}function vt(o,i){if(1&o&&(t.TgZ(0,"div",5),t.YNc(1,ft,2,1,"div",6),t.TgZ(2,"div",7),t._UZ(3,"app-channel-card",8),t.qZA(),t.TgZ(4,"div",7),t._UZ(5,"app-channel-card",8),t.qZA(),t.YNc(6,bt,2,1,"div",6),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.channelLastVideo),t.xp6(2),t.Q6J("channel",e.channelRandom[0]),t.xp6(2),t.Q6J("channel",e.channelRandom[1]),t.xp6(1),t.Q6J("ngIf",e.channelRandom&&"md"!==e.getBootstrapBreakpoint()&&"sm"!==e.getBootstrapBreakpoint())}}function _t(o,i){if(1&o&&(t.TgZ(0,"div",12),t._UZ(1,"app-video-card",13),t.qZA()),2&o){const e=i.$implicit;t.xp6(1),t.Q6J("video",e)}}function wt(o,i){if(1&o&&(t.TgZ(0,"div",5),t.YNc(1,_t,2,1,"div",11),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",e)}}function yt(o,i){1&o&&t.YNc(0,wt,2,1,"ng-template",10)}function Ct(o,i){if(1&o&&(t.TgZ(0,"ngb-carousel"),t.YNc(1,yt,1,0,null,9),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.deletedVideoPages)}}function xt(o,i){if(1&o&&(t.TgZ(0,"div",12),t._UZ(1,"app-video-card",13),t.qZA()),2&o){const e=i.$implicit;t.xp6(1),t.Q6J("video",e)}}function Tt(o,i){if(1&o&&(t.TgZ(0,"div",5),t.YNc(1,xt,2,1,"div",11),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",e)}}function St(o,i){1&o&&t.YNc(0,Tt,2,1,"ng-template",10)}function Dt(o,i){if(1&o&&(t.TgZ(0,"ngb-carousel"),t.YNc(1,St,1,0,null,9),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.newVideoPages)}}let It=(()=>{class o{constructor(e,n,r,a){this.publicCosmosdbService=e,this.metaService=r,this.spinner=a,this.VideoStatus=w.K,this.newVideoPages=[],this.deletedVideoPages=[],n.showNavigationArrows=!0,n.showNavigationIndicators=!1,n.interval=5e3,n.wrap=!0,n.keyboard=!1,n.pauseOnHover=!0,n.animation=!1}ngOnInit(){var e=this;return(0,_.Z)(function*(){e.spinner.show(void 0,{type:"ball-triangle-path",size:"medium",bdColor:"rgba(0, 0, 0, 0.8)",color:"#fff",fullScreen:!0}),e.metaService.resetToDefault();const n=(yield e.publicCosmosdbService.getAllChannels()).filter(u=>u.Monitoring);var s,r=!1,a=!1;try{for(var c,l=X(n);r=!(c=yield l.next()).done;r=!1){const u=c.value;u.LatestVideoId?(u.LatestVideo=yield e.publicCosmosdbService.getVideoById(u.LatestVideoId,u.id),u.LatestArchivedTime=new Date(u.LatestVideo?.ArchivedTime)?.getTime()??new Date(u.LatestVideo?.Timestamps.PublishedAt)?.getTime()??0):(u.LatestVideo=null,u.LatestArchivedTime=0)}}catch(u){a=!0,s=u}finally{try{r&&null!=l.return&&(yield l.return())}finally{if(a)throw s}}e.channelLastVideo=n.reduce((u,m)=>u.LatestArchivedTime>m.LatestArchivedTime?u:m);const d=n.filter(u=>u.id!==e.channelLastVideo.id);e.channelRandom=[d[Math.floor(Math.random()*d.length)],d[Math.floor(Math.random()*d.length)],d[Math.floor(Math.random()*d.length)]],yield e.initNewVideos(n),yield e.initDeletedVideos(n),e.spinner.hide()})()}initNewVideos(e){var n=this;return(0,_.Z)(function*(){const r=yield n.publicCosmosdbService.getArchivedVideos(20);n.newVideoPages=yield n.getVideoPages(r,e),console.debug("New Videos",n.newVideoPages)})()}initDeletedVideos(e){var n=this;return(0,_.Z)(function*(){const r=yield n.publicCosmosdbService.getSourceDeletedOrEditedVideos(20);n.deletedVideoPages=yield n.getVideoPages(r,e),console.debug("Deleted Videos",n.deletedVideoPages)})()}getVideoPages(e,n){var r=this;return(0,_.Z)(function*(){const{resources:a}=yield e.fetchAll(),s=a;s.forEach(d=>{d.Channel=n.find(u=>u.id===d.ChannelId&&u.Source===d.Source)});const l=r.getBootstrapBreakpoint(),c="xs"===l?1:"sm"===l||"md"===l?3:4;return s.reduce((d,u,m)=>{const p=Math.floor(m/c);return d[p]=[].concat(d[p]||[],u),d},[])})()}getBootstrapBreakpoint(){var e=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;return e<768?"xs":e<992?"sm":e<1200?"md":"lg"}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(k.a),t.Y36(y.Lu),t.Y36(M.R),t.Y36(C.t2))},o.\u0275cmp=t.Xpm({type:o,selectors:[["ng-component"]],features:[t._Bn([y.Lu])],decls:16,vars:3,consts:[["class","row row-cols-1 row-cols-md-3 row-cols-lg-4",4,"ngIf"],[1,"row"],[1,"col-12"],["translate","",1,"content-header"],[4,"ngIf"],[1,"row","row-cols-1","row-cols-md-3","row-cols-lg-4"],["class","col p-2",4,"ngIf"],[1,"col","p-2"],[3,"channel"],[4,"ngFor","ngForOf"],["ngbSlide",""],["class","col",4,"ngFor","ngForOf"],[1,"col"],[3,"video"]],template:function(e,n){1&e&&(t._UZ(0,"ngx-spinner")(1,"app-logo-header"),t.TgZ(2,"section"),t.YNc(3,vt,7,4,"div",0),t.qZA(),t.TgZ(4,"section")(5,"div",1)(6,"div",2)(7,"div",3),t._uU(8,"Source Deleted / Edited / Reject Videos"),t.qZA()()(),t.YNc(9,Ct,2,1,"ngb-carousel",4),t.qZA(),t.TgZ(10,"section")(11,"div",1)(12,"div",2)(13,"div",3),t._uU(14,"New Archived Videos"),t.qZA()()(),t.YNc(15,Dt,2,1,"ngb-carousel",4),t.qZA()),2&e&&(t.xp6(3),t.Q6J("ngIf",n.channelRandom),t.xp6(6),t.Q6J("ngIf",n.deletedVideoPages),t.xp6(6),t.Q6J("ngIf",n.newVideoPages))},dependencies:[f.sg,f.O5,y.uo,y.xl,T.Pi,J,ee,mt.J,C.Ro],styles:[".dash2-user[_ngcontent-%COMP%]{margin-top:58%}.dash2-user[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:30px}.avatar[_ngcontent-%COMP%]{width:60%;border:2px solid #975aff;padding:.4rem;position:absolute;right:0;left:0;margin:auto;display:inline-block;overflow:hidden;z-index:1;line-height:40px;transition:.3s;vertical-align:middle;font-size:1rem;box-shadow:0 2px 2px #00000024,0 1px 5px #0000001f,0 3px 1px -2px #0003}"]}),o})();var H=h(7545),I=h(4850),R=h(8613);function Pt(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"a",6),t.NdJ("click",function(){const a=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.filterStatus=s.VideoStatus[a])}),t._uU(1),t.qZA()}if(2&o){const e=i.$implicit;t.xp6(1),t.Oqu(e)}}function kt(o,i){if(1&o&&(t.TgZ(0,"div",15),t._UZ(1,"app-video-card",16),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("video",e)}}function Mt(o,i){if(1&o&&(t.ynx(0),t.YNc(1,kt,2,1,"div",14),t.BQk()),2&o){const e=i.$implicit,n=t.oxw();t.xp6(1),t.Q6J("ngIf",!(void 0!==n.filterStatus&&e.Status!==n.filterStatus||void 0!==n.filterSourceStatus&&e.SourceStatus!==n.filterSourceStatus))}}function Ht(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",17)(1,"div",15)(2,"button",18),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.loadMore())}),t._uU(3," Load more... "),t.qZA()()()}}let U=(()=>{class o{constructor(e,n,r){this.publicCosmosdbService=e,this.userService=n,this.spinner=r,this.videos=[],this.VideoStatus=w.K,this.filterStatus=void 0,this.filterSourceStatus=void 0,this.VideoStatusKeys=[...new Set(["Archived"].concat(Object.keys(w.K).filter(a=>"number"==typeof w.K[a])))],this.channels=[],this.filterPurchased=!1,this.hasMoreResults=!1}ngOnInit(){var e=this;return(0,_.Z)(function*(){yield e.spinner.show(void 0,{type:"ball-triangle-path",size:"medium",bdColor:"rgba(0, 0, 0, 0.8)",color:"#fff",fullScreen:!0}),e.channels=yield e.publicCosmosdbService.getAllChannels(),yield e.load(),e.spinner.hide()})()}load(e){return e||(e=this.channelInput),this.loadDefault(e)}loadDefault(e){var n=this;return(0,_.Z)(function*(){n.iterator=e?yield n.publicCosmosdbService.getVideosByChannelId(e.id,{maxItemCount:50}):yield n.publicCosmosdbService.getVideos({maxItemCount:50});const{resources:r,hasMoreResults:a}=yield n.iterator.fetchNext();n.videos=r,n.hasMoreResults=a,n.videos.forEach(s=>{n.fillChannel(s)})})()}loadMore(){var e=this;return(0,_.Z)(function*(){if(!e.hasMoreResults)return;const{resources:n,hasMoreResults:r}=yield e.iterator.fetchNext();e.hasMoreResults=r,n.forEach(s=>{e.fillChannel(s),e.videos.push(s)})})()}fillChannel(e){e.Channel=this.channelInput?this.channelInput:this.channels.find(n=>n.id===e.ChannelId&&n.Source===e.Source)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(k.a),t.Y36(R.K),t.Y36(C.t2))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-video-list"]],inputs:{channelInput:"channelInput"},decls:34,vars:9,consts:[[1,"card"],[1,"card-body","d-flex","flex-wrap","align-items-center","justify-content-end","filterCard","p-2"],[1,"flex-grow-1"],["display","dynamic","ngbDropdown","",1,"mr-2"],["id","videoStatus","ngbDropdownToggle","",1,"btn-sm","btn-outline-primary"],["ngbDropdownMenu","","aria-labelledby","videoStatus","role","menu"],[1,"dropdown-item",3,"click"],[1,"dropdown-divider"],["class","dropdown-item",3,"click",4,"ngFor","ngForOf"],["id","videoSourceStatus","ngbDropdownToggle","",1,"btn-sm","btn-outline-primary"],["ngbDropdownMenu","","aria-labelledby","videoSourceStatus","role","menu"],[1,"row","row-cols-1","row-cols-md-3","row-cols-lg-3","row-cols-xl-4"],[4,"ngFor","ngForOf"],["class","row",4,"ngIf"],["class","col",4,"ngIf"],[1,"col"],[3,"video"],[1,"row"],["type","button","translate","",1,"btn","btn-outline-primary","btn-block",3,"click"]],template:function(e,n){1&e&&(t._UZ(0,"ngx-spinner"),t.TgZ(1,"section")(2,"div",0)(3,"div",1),t._UZ(4,"div",2),t.TgZ(5,"div",3)(6,"button",4),t._uU(7),t.qZA(),t.TgZ(8,"div",5)(9,"a",6),t.NdJ("click",function(){return n.filterStatus=void 0}),t._uU(10,"Unset"),t.qZA(),t._UZ(11,"div",7),t.YNc(12,Pt,2,1,"a",8),t.qZA()(),t.TgZ(13,"div",3)(14,"button",9),t._uU(15),t.qZA(),t.TgZ(16,"div",10)(17,"a",6),t.NdJ("click",function(){return n.filterSourceStatus=void 0}),t._uU(18,"Unset"),t.qZA(),t._UZ(19,"div",7),t.TgZ(20,"a",6),t.NdJ("click",function(){return n.filterSourceStatus=n.VideoStatus.Unknown}),t._uU(21,"Unknown"),t.qZA(),t.TgZ(22,"a",6),t.NdJ("click",function(){return n.filterSourceStatus=n.VideoStatus.Exist}),t._uU(23,"Exist"),t.qZA(),t.TgZ(24,"a",6),t.NdJ("click",function(){return n.filterSourceStatus=n.VideoStatus.Edited}),t._uU(25,"Edited"),t.qZA(),t.TgZ(26,"a",6),t.NdJ("click",function(){return n.filterSourceStatus=n.VideoStatus.Reject}),t._uU(27,"Reject"),t.qZA(),t.TgZ(28,"a",6),t.NdJ("click",function(){return n.filterSourceStatus=n.VideoStatus.Deleted}),t._uU(29,"Deleted"),t.qZA()()()()(),t.TgZ(30,"div",11),t.YNc(31,Mt,2,1,"ng-container",12),t.ALo(32,"orderBy"),t.qZA(),t.YNc(33,Ht,4,0,"div",13),t.qZA()),2&e&&(t.xp6(7),t.hij(" ",void 0!==n.filterStatus?n.VideoStatus[n.filterStatus]:"Video Status"," "),t.xp6(5),t.Q6J("ngForOf",n.VideoStatusKeys),t.xp6(3),t.hij(" ",void 0!==n.filterSourceStatus?n.VideoStatus[n.filterSourceStatus]:"Video Source Status"," "),t.xp6(16),t.Q6J("ngForOf",t.Dn7(32,5,n.videos,"video.ArchivedTime",!1)),t.xp6(2),t.Q6J("ngIf",n.hasMoreResults))},dependencies:[f.sg,f.O5,y.jt,y.iD,y.Vi,T.Pi,ee,C.Ro,N],styles:[".filterCard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding:.5rem}"]}),o})();var te=h(3831);function Rt(o,i){if(1&o&&(t.TgZ(0,"div",18),t._UZ(1,"div",19),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("innerHtml",e.channel.Note,t.oJD)}}function At(o,i){if(1&o&&(t.TgZ(0,"picture"),t._UZ(1,"source",20)(2,"img",21),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("srcset",e.blobstorage_public+"/banner/"+e.bannerAvif,t.LSH),t.xp6(1),t.Q6J("src",e.blobstorage_public+"/banner/"+e.channel.Banner,t.LSH)}}function Et(o,i){1&o&&t._UZ(0,"div",22)}function Vt(o,i){if(1&o&&(t.TgZ(0,"picture"),t._UZ(1,"source",20)(2,"img",23),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("srcset",e.blobstorage_public+"/avatar/"+e.avatarAvif,t.LSH),t.xp6(1),t.Q6J("src",e.blobstorage_public+"/avatar/"+e.channel.Avatar,t.LSH)}}function Bt(o,i){if(1&o&&(t.TgZ(0,"a",24),t._UZ(1,"img",25),t.qZA()),2&o){const e=t.oxw(2);t.MGl("ngbTooltip","Go to ",e.channel.Source,""),t.Q6J("href",e.sourceUrl,t.LSH),t.xp6(1),t.Q6J("src",e.sourceIcon,t.LSH)}}function Ft(o,i){if(1&o&&(t.TgZ(0,"section",2)(1,"div",3),t.YNc(2,Rt,2,1,"div",4),t.TgZ(3,"div",5)(4,"div",6)(5,"div",7),t.YNc(6,At,3,2,"picture",8),t.YNc(7,Et,1,0,"ng-template",null,9,t.W1O),t.YNc(9,Vt,3,2,"picture",10),t.qZA(),t.TgZ(10,"div",11)(11,"div",12)(12,"div",13)(13,"div",14),t.YNc(14,Bt,2,3,"a",15),t.TgZ(15,"div",16)(16,"h4",17),t._uU(17),t.qZA(),t.TgZ(18,"small"),t._uU(19),t.qZA()()()()()()()()()()),2&o){const e=t.MAs(8),n=t.oxw();t.xp6(2),t.Q6J("ngIf",n.channel.Note),t.xp6(4),t.Q6J("ngIf",n.channel.Banner)("ngIfElse",e),t.xp6(3),t.Q6J("ngIf",n.channel.Avatar),t.xp6(5),t.Q6J("ngIf",n.channel.Source&&n.sourceUrl),t.xp6(3),t.Oqu(n.channel.ChannelName),t.xp6(2),t.hij("@",n.channel.Source,"")}}function Ot(o,i){if(1&o&&t._UZ(0,"app-video-list",26),2&o){const e=t.oxw();t.Q6J("channelInput",e.channel)}}let Zt=(()=>{class o{constructor(e,n,r,a,s,l,c){this.route=e,this.router=n,this.ngDynamicBreadcrumbService=r,this.publicCosmosdbService=a,this.userService=s,this.metaService=l,this.configService=c}ngOnInit(){this.blobstorage_public=this.configService.environment.blobstorage_public,this.route.paramMap.pipe((0,H.w)(e=>this.publicCosmosdbService.getChannelById(e.get("channelId"))),(0,I.U)(e=>{switch(this.ngDynamicBreadcrumbService.updateBreadcrumbLabels({ChannelName:e.ChannelName}),this.channel=e,this.channel.Banner&&(this.bannerAvif=this.channel.Banner.substring(0,this.channel.Banner.lastIndexOf("."))+".avif"),this.channel.Avatar&&(this.avatarAvif=this.channel.Avatar.substring(0,this.channel.Avatar.lastIndexOf("."))+".avif"),this.videoListComponent&&this.videoListComponent.load(e),this.metaService.setByChannel(e),e.Source){case"Youtube":this.sourceIcon="/assets/img/icons/youtube.svg",this.sourceUrl="https://www.youtube.com/channel/"+e.id;break;case"Twitch":this.sourceIcon="/assets/img/icons/twitch.svg",this.sourceUrl="https://www.twitch.tv/"+e.id;break;case"Twitcasting":this.sourceIcon="/assets/img/icons/twitcasting.svg",this.sourceUrl="https://twitcasting.tv/"+e.id}return e})).subscribe()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(b.gz),t.Y36(b.F0),t.Y36(te.Kz),t.Y36(k.a),t.Y36(R.K),t.Y36(M.R),t.Y36(D.E))},o.\u0275cmp=t.Xpm({type:o,selectors:[["ng-component"]],viewQuery:function(e,n){if(1&e&&t.Gf(U,5),2&e){let r;t.iGM(r=t.CRH())&&(n.videoListComponent=r.first)}},decls:2,vars:2,consts:[["class","page-user-profile",4,"ngIf"],[3,"channelInput",4,"ngIf"],[1,"page-user-profile"],[1,"row","row-cols-12","row-cols-md-12"],["class","col-12 mt-2",4,"ngIf"],[1,"col-12"],[1,"card"],[1,"user-profile-images"],[4,"ngIf","ngIfElse"],["hideBanner",""],[4,"ngIf"],[1,"card-content"],[1,"card-body"],[1,"user-profile-buttons","d-flex","justify-content-md-between","justify-content-center","flex-wrap"],[1,"d-flex"],["id","sourceIcon","role","button","class","mr-2","placement","bottom","target","_blank","referrerpolicy","no-referrer",3,"href","ngbTooltip",4,"ngIf"],[1,"d-flex","justify-content-center","flex-column"],[1,"mb-0"],[1,"col-12","mt-2"],["role","alert",1,"alert","text-center","alert-warning","mb-0",3,"innerHtml"],["type","image/avif",3,"srcset"],[1,"img-fluid","rounded-top","user-timeline-image",3,"src"],[1,"user-timeline-image","hideBanner"],["height","140","width","140",1,"user-profile-image","rounded",3,"src"],["id","sourceIcon","role","button","placement","bottom","target","_blank","referrerpolicy","no-referrer",1,"mr-2",3,"href","ngbTooltip"],["alt","Source Icon",3,"src"],[3,"channelInput"]],template:function(e,n){1&e&&(t.YNc(0,Ft,20,7,"section",0),t.YNc(1,Ot,1,1,"app-video-list",1)),2&e&&(t.Q6J("ngIf",n.channel),t.xp6(1),t.Q6J("ngIf",n.channel))},dependencies:[f.O5,y._L,U],styles:[".user-timeline-image[_ngcontent-%COMP%]{width:100%;aspect-ratio:2120/350}.user-timeline-image.hideBanner[_ngcontent-%COMP%]{min-height:90px;height:90px}@media (max-width: 767.98px){.user-profile-buttons[_ngcontent-%COMP%]{padding-top:3rem;text-align:center}}#heart[_ngcontent-%COMP%]{width:3rem;height:3rem;animation:1.5s ease 0s infinite beat}@keyframes beat{0%,50%,to{transform:scale(1)}30%,80%{transform:scale(.92,.95)}}a#sourceIcon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:3rem;height:3rem}h4[_ngcontent-%COMP%]{line-height:1}"]}),o})();var zt=h(5226),ne=h.n(zt),Wt=h(8583),Ut=h(7221),Lt=h(537),oe=h(866),ie=h(529);let Nt=(()=>{class o{constructor(e,n){this.httpClient=e,this.configService=n,this.apiUrl=this.configService.environment.apiUrl}AddChannel(e,n){return this.httpClient.post(`${this.apiUrl}/api/Channel`,{UserId:e,Url:n},{responseType:"text"})}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(ie.eN),t.LFG(D.E))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function Yt(o,i){if(1&o&&(t.TgZ(0,"div",9),t._UZ(1,"app-channel-card",10),t.qZA()),2&o){const e=i.$implicit;t.ekj("d-none",!e.Monitoring),t.xp6(1),t.Q6J("channel",e)}}function Qt(o,i){if(1&o&&(t.TgZ(0,"div",11),t._UZ(1,"app-channel-card",10),t.qZA()),2&o){const e=i.$implicit;t.ekj("d-none",e.Monitoring),t.xp6(1),t.Q6J("channel",e)}}let $t=(()=>{class o{constructor(e,n,r,a,s,l,c,d,u){this.route=e,this.router=n,this.userService=r,this.publicCosmosdbService=a,this.metaService=s,this.authService=l,this.translateService=c,this.spinner=d,this.channelService=u,this.channels=[]}ngOnInit(){var e=this;return(0,_.Z)(function*(){yield e.spinner.show(void 0,{type:"ball-triangle-path",size:"medium",bdColor:"rgba(0, 0, 0, 0.8)",color:"#fff",fullScreen:!0}),e.metaService.resetToDefault();let n=yield e.publicCosmosdbService.getAllChannels();var s,r=!1,a=!1;try{for(var c,l=X(n);r=!(c=yield l.next()).done;r=!1){const d=c.value;d.LatestVideoId?(d.LatestVideo=yield e.publicCosmosdbService.getVideoById(d.LatestVideoId,d.id),d.LatestArchivedTime=new Date(d.LatestVideo?.ArchivedTime)?.getTime()??new Date(d.LatestVideo?.Timestamps.PublishedAt)?.getTime()??0):(d.LatestVideo=null,d.LatestArchivedTime=0)}}catch(d){a=!0,s=d}finally{try{r&&null!=l.return&&(yield l.return())}finally{if(a)throw s}}e.channels=n.sort((d,u)=>u.LatestArchivedTime-d.LatestArchivedTime),e.spinner.hide(),e.route.queryParamMap.pipe((0,Wt.g)(2e3)).subscribe(d=>{"true"===d.get("promptAddChannel")&&e.userService.isUserLoggedIn()&&e.promptAddChannel()})})()}promptAddChannel(){var e=this;return(0,_.Z)(function*(){if(!e.authService.redirectToLoginPageIfNotLoggedIn(void 0,"?promptAddChannel=true"))return;const n=ne().mixin({showCancelButton:!0,progressSteps:['<i class="ft-list"></i>',"?",'<i class="ft-edit"></i>','<i class="ft-heart-on"></i>'],customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-danger ml-1"},cancelButtonText:e.translateService.instant("Cancel"),buttonsStyling:!1,backdrop:!0});if(!(yield n.fire({currentProgressStep:0,title:e.translateService.instant("Please agree to our terms and conditions"),html:e.translateService.instant("AddChannelRules"),input:"checkbox",inputValue:1,inputPlaceholder:e.translateService.instant("I agree with the terms and conditions"),inputValidator:c=>!c&&"You need to agree with T&C"})).isConfirmed)return;const a=yield n.fire({currentProgressStep:1,title:e.translateService.instant("Please choose the channel platform"),input:"radio",inputOptions:{Youtube:"Youtube",Twitch:"Twitch",Twitcasting:"Twitcasting"},inputValidator:c=>!c&&"You need to select something!",footer:'<a href="https://discord.gg/2M689Aaq4b" target="_blank">Need more platforms? Ask in our Discord!</a>'});if(!a.isConfirmed)return;let s="";switch(a.value){case"Youtube":s="https://www.youtube.com/@QuonTama";break;case"Twitch":s="https://www.twitch.tv/sudayoruka";break;case"Twitcasting":s="https://twitcasting.tv/t3c_o0o"}const l=yield n.fire({currentProgressStep:2,title:e.translateService.instant("Please input the channel url"),input:"url",inputPlaceholder:s,confirmButtonText:e.translateService.instant("Submit"),showLoaderOnConfirm:!0,preConfirm:c=>e.AddChannel$(c).toPromise()});!l.isConfirmed||(0===l.value?yield n.fire({currentProgressStep:3,progressSteps:['<i class="ft-list"></i>',"?",'<i class="ft-edit"></i>','<i class="ft-x"></i>'],title:e.translateService.instant("Error!"),html:e.translateService.instant("Something went wrong. Please refresh the page and try again."),icon:"error",showConfirmButton:!1,showCancelButton:!1,showCloseButton:!0}):1===l.value?yield n.fire({currentProgressStep:3,title:e.translateService.instant("Success!"),html:e.translateService.instant("Thanks for applying!<br>We've received your application."),icon:"success",confirmButtonText:e.translateService.instant('<i class="ft-heart-on"></i> Great!'),showCancelButton:!1}):l.value.toString().length>3&&(yield n.fire({currentProgressStep:3,progressSteps:['<i class="ft-list"></i>',"?",'<i class="ft-edit"></i>','<i class="ft-x"></i>'],title:e.translateService.instant("Channel already exists!"),html:e.translateService.instant("Channel is already exist",{channel:l.value}),icon:"warning",showConfirmButton:!1,showCancelButton:!1,showCloseButton:!0})))})()}AddChannel$(e){return this.channelService.AddChannel(this.userService.User.id,e).pipe((0,I.U)(n=>"OK"===n?1:n),(0,I.U)(n=>"Failed"===n?0:n),(0,Ut.K)(n=>(console.error(n),0)),(0,Lt.x)(()=>{this.userService.getUserFromDB().subscribe()}))}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(b.gz),t.Y36(b.F0),t.Y36(R.K),t.Y36(k.a),t.Y36(M.R),t.Y36(oe.e),t.Y36(T.sK),t.Y36(C.t2),t.Y36(Nt))},o.\u0275cmp=t.Xpm({type:o,selectors:[["ng-component"]],decls:19,vars:2,consts:[[1,"row"],[1,"col-12"],["translate","",1,"content-header"],[1,"row","row-cols-1","row-cols-md-3","row-cols-lg-3","row-cols-xl-4"],["class","col p-2",3,"d-none",4,"ngFor","ngForOf"],["translate","We stopped watching these channels after we had used up all the Support Tokens. Please support these channels to restore the monitoring service.",1,"content-sub-header","mb-1"],["class","col p-2 grayscale",3,"d-none",4,"ngFor","ngForOf"],[1,"col-12","p-2"],["type","button","translate","",1,"btn","btn-primary","btn-block","gradient-ibiza-sunset","shadow-z-1-hover",3,"click"],[1,"col","p-2"],[3,"channel"],[1,"col","p-2","grayscale"]],template:function(e,n){1&e&&(t._UZ(0,"ngx-spinner"),t.TgZ(1,"section")(2,"div",0)(3,"div",1)(4,"div",2),t._uU(5,"Monitored Channels"),t.qZA()()(),t.TgZ(6,"div",3),t.YNc(7,Yt,2,3,"div",4),t.qZA(),t.TgZ(8,"div",0)(9,"div",1)(10,"div",2),t._uU(11,"Unmonitored Channels"),t.qZA(),t._UZ(12,"p",5),t.qZA()(),t.TgZ(13,"div",3),t.YNc(14,Qt,2,3,"div",6),t.qZA(),t.TgZ(15,"div",0)(16,"div",7)(17,"button",8),t.NdJ("click",function(){return n.promptAddChannel()}),t._uU(18,"Add Channel"),t.qZA()()()()),2&e&&(t.xp6(7),t.Q6J("ngForOf",n.channels),t.xp6(7),t.Q6J("ngForOf",n.channels))},dependencies:[f.sg,T.Pi,J,C.Ro],styles:[".grayscale[_ngcontent-%COMP%]{filter:grayscale(70%)}"]}),o})();var Gt=h(1086),qt=h(2994);let re={};const ae=new WeakMap,se={metric:[{from:0,to:1e3,unit:"B",long:"bytes"},{from:1e3,to:1e6,unit:"kB",long:"kilobytes"},{from:1e6,to:1e9,unit:"MB",long:"megabytes"},{from:1e9,to:1e12,unit:"GB",long:"gigabytes"},{from:1e12,to:1e15,unit:"TB",long:"terabytes"},{from:1e15,to:1e18,unit:"PB",long:"petabytes"},{from:1e18,to:1e21,unit:"EB",long:"exabytes"},{from:1e21,to:1e24,unit:"ZB",long:"zettabytes"},{from:1e24,to:1e27,unit:"YB",long:"yottabytes"}],metric_octet:[{from:0,to:1e3,unit:"o",long:"octets"},{from:1e3,to:1e6,unit:"ko",long:"kilooctets"},{from:1e6,to:1e9,unit:"Mo",long:"megaoctets"},{from:1e9,to:1e12,unit:"Go",long:"gigaoctets"},{from:1e12,to:1e15,unit:"To",long:"teraoctets"},{from:1e15,to:1e18,unit:"Po",long:"petaoctets"},{from:1e18,to:1e21,unit:"Eo",long:"exaoctets"},{from:1e21,to:1e24,unit:"Zo",long:"zettaoctets"},{from:1e24,to:1e27,unit:"Yo",long:"yottaoctets"}],iec:[{from:0,to:Math.pow(1024,1),unit:"B",long:"bytes"},{from:Math.pow(1024,1),to:Math.pow(1024,2),unit:"KiB",long:"kibibytes"},{from:Math.pow(1024,2),to:Math.pow(1024,3),unit:"MiB",long:"mebibytes"},{from:Math.pow(1024,3),to:Math.pow(1024,4),unit:"GiB",long:"gibibytes"},{from:Math.pow(1024,4),to:Math.pow(1024,5),unit:"TiB",long:"tebibytes"},{from:Math.pow(1024,5),to:Math.pow(1024,6),unit:"PiB",long:"pebibytes"},{from:Math.pow(1024,6),to:Math.pow(1024,7),unit:"EiB",long:"exbibytes"},{from:Math.pow(1024,7),to:Math.pow(1024,8),unit:"ZiB",long:"zebibytes"},{from:Math.pow(1024,8),to:Math.pow(1024,9),unit:"YiB",long:"yobibytes"}],iec_octet:[{from:0,to:Math.pow(1024,1),unit:"o",long:"octets"},{from:Math.pow(1024,1),to:Math.pow(1024,2),unit:"Kio",long:"kibioctets"},{from:Math.pow(1024,2),to:Math.pow(1024,3),unit:"Mio",long:"mebioctets"},{from:Math.pow(1024,3),to:Math.pow(1024,4),unit:"Gio",long:"gibioctets"},{from:Math.pow(1024,4),to:Math.pow(1024,5),unit:"Tio",long:"tebioctets"},{from:Math.pow(1024,5),to:Math.pow(1024,6),unit:"Pio",long:"pebioctets"},{from:Math.pow(1024,6),to:Math.pow(1024,7),unit:"Eio",long:"exbioctets"},{from:Math.pow(1024,7),to:Math.pow(1024,8),unit:"Zio",long:"zebioctets"},{from:Math.pow(1024,8),to:Math.pow(1024,9),unit:"Yio",long:"yobioctets"}]};class Xt{constructor(i,e){e=Object.assign({units:"metric",precision:1,locale:void 0},re,e),ae.set(this,e),Object.assign(se,e.customUnits);const n=i<0?"-":"";i=Math.abs(i);const r=se[e.units];if(!r)throw new Error(`Invalid units specified: ${e.units}`);{const a=r.find(s=>i>=s.from&&i<s.to);if(a){const s=new Intl.NumberFormat(e.locale,{style:"decimal",minimumFractionDigits:e.precision,maximumFractionDigits:e.precision}),l=0===a.from?n+i:n+s.format(i/a.from);this.value=l,this.unit=a.unit,this.long=a.long}else this.value=n+i,this.unit="",this.long=""}}toString(){const i=ae.get(this);return i.toStringFn?i.toStringFn.bind(this)():`${this.value} ${this.unit}`}}function le(o,i){return new Xt(o,i)}le.defaultOptions=function(o){re=o};const ce=le;let Jt=(()=>{class o{constructor(e,n){this.httpClient=e,this.configService=n,this.apiUrl=this.configService.environment.apiUrl}GetSASToken$(e,n){return this.httpClient.get(`${this.apiUrl}/api/Video/SASToken`,{params:{userId:e,videoId:n},responseType:"text"})}RemoveVideo$(e){return this.httpClient.delete(`${this.apiUrl}/api/Video`,{params:{videoId:e}})}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(ie.eN),t.LFG(D.E))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var de=h(7185),ue=h(3121);let jt=(()=>{class o{constructor(){this.startTime=0,this.timeChange=new t.vpe}ngOnInit(){}onPlayerReady(e){this.api=e;const n=this.api.getDefaultMedia();n.subscriptions.loadedMetadata.subscribe(()=>{n.currentTime=this.startTime}),n.subscriptions.playing.subscribe(()=>{this.playing=!0}),n.subscriptions.pause.subscribe(()=>{this.playing=!1}),n.subscriptions.canPlay.subscribe(()=>{this.playing&&this.api.play()}),n.subscriptions.timeUpdate.subscribe(()=>{this.timeChange.emit(n.currentTime)})}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-player"]],inputs:{source:"source",poster:"poster",startTime:"startTime"},outputs:{timeChange:"timeChange"},decls:3,vars:4,consts:[[3,"onPlayerReady"],["id","singleVideo","preload","auto","controls","",3,"vgMedia","src","poster","volume"],["media",""]],template:function(e,n){if(1&e&&(t.TgZ(0,"vg-player",0),t.NdJ("onPlayerReady",function(a){return n.onPlayerReady(a)}),t._UZ(1,"video",1,2),t.qZA()),2&e){const r=t.MAs(2);t.xp6(1),t.Q6J("vgMedia",r)("src",n.source,t.LSH)("poster",n.poster,t.LSH)("volume",.7)}},dependencies:[ue.xo,ue.xJ],styles:["video[_ngcontent-%COMP%]{max-height:60vh}"]}),o})();function Kt(o,i){if(1&o&&(t.TgZ(0,"div",11),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.ekj("alert-secondary",e.video.Status==e.VideoStatus.Pending||e.video.Status==e.VideoStatus.Expired||e.video.Status==e.VideoStatus.Missing||e.video.Status==e.VideoStatus.Skipped||e.video.Status==e.VideoStatus.Edited)("alert-danger",e.video.Status==e.VideoStatus.Reject||e.video.Status==e.VideoStatus.Error||e.video.Status==e.VideoStatus.Deleted),t.xp6(1),t.hij(" ",e.video.Note," ")}}function en(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"figure",12)(1,"app-player",13),t.NdJ("timeChange",function(r){t.CHM(e);const a=t.oxw(2);return t.KtG(a.OnTimeUpdated(r))}),t.qZA()()}if(2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("source",e.video.DownloadUrl+e.sASToken)("poster",e.thumbnail)("startTime",e.startTime)}}const tn=function(o){return{state:o}};function nn(o,i){if(1&o&&(t.TgZ(0,"figure",14)(1,"picture"),t._UZ(2,"source",15)(3,"img",16),t.qZA(),t.TgZ(4,"figcaption"),t._UZ(5,"h2"),t.TgZ(6,"p",17),t._uU(7," This video is videoState "),t.qZA()()()),2&o){const e=t.oxw(2);t.xp6(2),t.Q6J("srcset",e.thumbnailAvif,t.LSH),t.xp6(1),t.Q6J("src",e.thumbnail,t.LSH),t.xp6(3),t.Q6J("translateParams",t.VKq(3,tn,e.VideoStatus[e.video.Status]))}}const on=function(o){return["/channels",o]};function rn(o,i){if(1&o&&(t.TgZ(0,"div",18)(1,"div",19)(2,"div",20)(3,"div",21)(4,"div",22)(5,"picture"),t._UZ(6,"source",15)(7,"img",23),t.qZA()(),t.TgZ(8,"div",24)(9,"a",25)(10,"h4",26),t._uU(11),t.qZA(),t.TgZ(12,"p",27),t._uU(13),t._UZ(14,"br"),t._uU(15),t.qZA()()()()()()()),2&o){const e=t.oxw(2);t.xp6(6),t.Q6J("srcset",e.blobstorage_public+"/avatar/"+e.avatarAvif,t.LSH),t.xp6(1),t.Q6J("src",e.blobstorage_public+"/avatar/"+e.channel.Avatar,t.LSH),t.xp6(2),t.Q6J("routerLink",t.VKq(6,on,e.video.ChannelId)),t.xp6(2),t.Oqu(e.channel.ChannelName),t.xp6(2),t.Oqu(e.channel.id),t.xp6(2),t.hij("@",e.channel.Source,"")}}function an(o,i){if(1&o&&(t.TgZ(0,"div",7)(1,"div",28)(2,"div",19)(3,"div",20)(4,"div",21)(5,"div",29)(6,"picture"),t._UZ(7,"source",30)(8,"source",31)(9,"img",32),t.qZA()(),t.TgZ(10,"div",33)(11,"a",34),t._uU(12,' Right click and "Save As..." '),t.qZA()()()()()()()),2&o){const e=t.oxw(2);t.xp6(11),t.Q6J("href",e.video.DownloadUrl+e.sASToken,t.LSH)}}function sn(o,i){if(1&o&&(t.ynx(0),t.TgZ(1,"a",45),t._UZ(2,"app-status-badge",41),t.qZA(),t.BQk()),2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("href",e.video.SourceUrl,t.LSH),t.xp6(1),t.Q6J("videoStatus",e.video.SourceStatus)}}function ln(o,i){if(1&o&&t._UZ(0,"app-status-badge",41),2&o){const e=t.oxw(3);t.Q6J("videoStatus",e.video.SourceStatus)}}function cn(o,i){if(1&o&&(t.TgZ(0,"tr")(1,"th",40),t._uU(2,"Size"),t.qZA(),t.TgZ(3,"td")(4,"span",46),t._uU(5),t.qZA()()()),2&o){const e=t.oxw(3);t.xp6(4),t.Q6J("ngbTooltip",e.video.Size+" bytes"),t.xp6(1),t.hij(" ",e.video.Size_fixed," ")}}function dn(o,i){if(1&o&&(t.TgZ(0,"tr")(1,"th",40),t._uU(2,"Scheduled StartTime"),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"date"),t.qZA()()),2&o){const e=t.oxw(3);t.xp6(4),t.hij(" ",t.xi3(5,1,e.video.Timestamps.ScheduledStartTime,"yyyy/MM/dd HH:mm:ss")," ")}}function un(o,i){if(1&o&&(t.TgZ(0,"tr")(1,"th",40),t._uU(2,"Actual StartTime"),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"date"),t.qZA()()),2&o){const e=t.oxw(3);t.xp6(4),t.hij(" ",t.xi3(5,1,e.video.Timestamps.ActualStartTime,"yyyy/MM/dd HH:mm:ss")," ")}}function pn(o,i){if(1&o&&(t.TgZ(0,"tr")(1,"th",40),t._uU(2,"Delete By Date"),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"date"),t.qZA()()),2&o){const e=t.oxw(3);t.xp6(4),t.hij(" ",t.xi3(5,1,e.video.DueDate,"yyyy/MM/dd")," ")}}function hn(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"button",49),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(4);return t.KtG(r.removeVideo())}),t._uU(1," Remove Video "),t.qZA()}}function gn(o,i){if(1&o&&(t.TgZ(0,"div",36)(1,"div",19)(2,"div",20)(3,"h4",47),t._uU(4,"Manage"),t.qZA(),t.YNc(5,hn,2,0,"button",48),t.qZA()()()),2&o){const e=t.oxw(3);t.xp6(5),t.Q6J("ngIf",e.video.Status===e.VideoStatus.Archived)}}function mn(o,i){if(1&o&&(t.TgZ(0,"div",35)(1,"div",36)(2,"div",19)(3,"div",20)(4,"h4",26),t._uU(5),t.qZA(),t.TgZ(6,"div",37)(7,"table",38)(8,"tbody")(9,"tr")(10,"th",39),t._uU(11,"ID"),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA()(),t.TgZ(14,"tr")(15,"th",40),t._uU(16,"Archived Status"),t.qZA(),t.TgZ(17,"td"),t._UZ(18,"app-status-badge",41),t.qZA()(),t.TgZ(19,"tr")(20,"th",40),t._uU(21,"Source Status"),t.qZA(),t.TgZ(22,"td"),t.YNc(23,sn,3,2,"ng-container",42),t.YNc(24,ln,1,1,"ng-template",null,43,t.W1O),t.qZA()(),t.TgZ(26,"tr")(27,"th",40),t._uU(28,"Is live stream"),t.qZA(),t.TgZ(29,"td"),t._uU(30),t.qZA()(),t.YNc(31,cn,6,2,"tr",0),t.TgZ(32,"tr")(33,"th",40),t._uU(34,"Published At"),t.qZA(),t.TgZ(35,"td"),t._uU(36),t.ALo(37,"date"),t.qZA()(),t.YNc(38,dn,6,4,"tr",0),t.YNc(39,un,6,4,"tr",0),t.YNc(40,pn,6,4,"tr",0),t.qZA()()()()()(),t.YNc(41,gn,6,1,"div",44),t.qZA()),2&o){const e=t.MAs(25),n=t.oxw(2);let r;t.xp6(5),t.Oqu(n.video.Title_fixed),t.xp6(8),t.hij(" ",n.video.id," "),t.xp6(5),t.Q6J("videoStatus",n.video.Status),t.xp6(5),t.Q6J("ngIf",n.video.SourceStatus!==n.VideoStatus.Deleted&&n.video.SourceUrl)("ngIfElse",e),t.xp6(7),t.hij(" ",null!==(r=n.video.IsLiveStream)&&void 0!==r?r:"Unknown"," "),t.xp6(1),t.Q6J("ngIf",n.video.Size),t.xp6(5),t.hij(" ",t.xi3(37,12,n.video.Timestamps.PublishedAt,"yyyy/MM/dd HH:mm:ss")," "),t.xp6(2),t.Q6J("ngIf",n.video.Timestamps.ScheduledStartTime),t.xp6(1),t.Q6J("ngIf",n.video.Timestamps.ActualStartTime),t.xp6(1),t.Q6J("ngIf",n.video.Status===n.VideoStatus.Archived&&n.video.ArchivedTime),t.xp6(1),t.Q6J("ngIf",n.user&&n.user.IsAdmin)}}function fn(o,i){if(1&o&&(t.TgZ(0,"section")(1,"div",1),t.YNc(2,Kt,2,5,"div",2),t.TgZ(3,"div",3),t.YNc(4,en,2,3,"figure",4),t.YNc(5,nn,8,5,"ng-template",null,5,t.W1O),t.TgZ(7,"div",6)(8,"div",7),t.YNc(9,rn,16,8,"div",8),t.qZA(),t.YNc(10,an,13,1,"div",9),t.qZA()(),t.YNc(11,mn,42,15,"div",10),t.qZA()()),2&o){const e=t.MAs(6),n=t.oxw();t.xp6(2),t.Q6J("ngIf",n.video&&(null==n.video?null:n.video.Note)&&n.video.Status>=n.VideoStatus.Expired),t.xp6(2),t.Q6J("ngIf",n.canPlay&&n.video&&n.video.Status>=40&&n.video.Status<50&&!!n.video.Filename&&!!n.sASToken)("ngIfElse",e),t.xp6(5),t.Q6J("ngIf",n.channel),t.xp6(1),t.Q6J("ngIf",n.canPlay&&(null==n.video?null:n.video.Status)===n.VideoStatus.Archived),t.xp6(1),t.Q6J("ngIf",n.video)}}let bn=(()=>{class o{constructor(e,n,r,a,s,l,c,d,u,m,p,v){this.route=e,this.router=n,this.ngDynamicBreadcrumbService=r,this.publicCosmosdbService=a,this.videoService=s,this.userService=l,this.toastr=c,this.metaService=d,this.translateService=u,this.spinner=m,this.authService=p,this.configService=v,this.VideoStatus=w.K,this.byteSize=ce,this.canPlay=!1,this.time=0,this.startTime=0}get user(){return this.userService.User}ngOnInit(){var e=this;this.blobstorage=this.configService.environment.blobstorage,this.blobstorage_public=this.configService.environment.blobstorage_public,this.route.paramMap.pipe((0,qt.b)(()=>{this.spinner.show(void 0,{type:"ball-triangle-path",size:"medium",bdColor:"rgba(0, 0, 0, 0.8)",color:"#fff",fullScreen:!0})}),(0,H.w)(n=>this.publicCosmosdbService.getVideoById(n.get("id"),n.get("channelId"))),(0,I.U)(n=>{var r,a;switch(this.video=n,this.video.Title_fixed=n.Title?this.video.Title?.replace(/\d{4}-\d{2}-\d{2}\s\d{2}:\d{2}$/,""):"(No Title)",this.video.Size_fixed=ce(this.video.Size??0,{units:"iec",precision:3}).toString(),this.video.DownloadUrl=`${this.blobstorage}/videos/${n.Filename}`,(r=this.video).Status??(r.Status=w.K.Unknown),(a=this.video).SourceStatus??(a.SourceStatus=w.K.Unknown),this.video.Source){case"Youtube":this.video.SourceUrl=`https://www.youtube.com/watch?v=${this.video.id}`;break;case"Twitcasting":this.video.SourceUrl=`https://twitcasting.tv/${this.video.ChannelId}/movie/${this.video.id}`}n.ArchivedTime&&(this.video.DueDate=new Date(new Date(n.ArchivedTime).valueOf()+2592e6)),this.metaService.setByVideo(n)}),(0,H.w)(()=>this.publicCosmosdbService.getChannelById(this.video.ChannelId,this.video.Source)),(0,I.U)(n=>{this.channel=n,this.channel.Avatar&&(this.avatarAvif=this.channel.Avatar.substring(0,this.channel.Avatar.lastIndexOf("."))+".avif"),this.ngDynamicBreadcrumbService.updateBreadcrumbLabels({ChannelName:this.channel.ChannelName,VideoId:this.video.id})}),(0,H.w)(()=>this.authService.loginAlreadySigninUser()),(0,H.w)(n=>this.video.Status==w.K.Archived&&n&&this.user.IsAdmin?(this.canPlay=!0,this.videoService.GetSASToken$(this.user.id,this.video.id).pipe((0,I.U)(r=>this.sASToken=r))):(0,Gt.of)(!1))).subscribe(()=>{this.reloadTimer=setInterval((0,_.Z)(function*(){e.router.navigate([],{relativeTo:e.route,queryParams:{t:e.time},queryParamsHandling:"merge"}),e.videoService.GetSASToken$(e.user.id,e.video.id).subscribe(n=>{e.startTime=e.time,e.sASToken=n,console.log("Update SASToken",n)})}),432e5),this.thumbnail=this.video.Thumbnail?`${this.blobstorage_public}/thumbnails/${this.video.Thumbnail}`:`${this.blobstorage_public}/banner/${this.channel.Banner}`,this.thumbnail&&(this.thumbnailAvif=this.thumbnail.substring(0,this.thumbnail.lastIndexOf("."))+".avif"),this.spinner.hide()})}OnTimeUpdated(e){this.time=e}removeVideo(){var e=this;return(0,_.Z)(function*(){const n=ne().mixin({showCancelButton:!0,progressSteps:['<i class="fa ft-edit-2"></i>',"!",'<i class="ft-check"></i>'],customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-danger ml-1"},buttonsStyling:!1,backdrop:!0,cancelButtonText:e.translateService.instant("Cancel")});if(!(yield n.fire({currentProgressStep:1,title:e.translateService.instant("Notice!"),html:e.translateService.instant("remove-video-notice"),icon:"warning",confirmButtonText:e.translateService.instant("Got it!"),showLoaderOnConfirm:!0,preConfirm:()=>e.videoService.RemoveVideo$(e.video.id).toPromise()})).isConfirmed)return void console.warn("User cancelled.");yield n.fire({currentProgressStep:2,title:e.translateService.instant("Success!"),html:e.translateService.instant("You have removed this video."),icon:"success",confirmButtonText:e.translateService.instant('<i class="ft-heart-on"></i> Great!'),showCancelButton:!1});let a=e.router.url;e.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>{e.router.navigate([a])})})()}ngOnDestroy(){clearInterval(this.reloadTimer)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(b.gz),t.Y36(b.F0),t.Y36(te.Kz),t.Y36(k.a),t.Y36(Jt),t.Y36(R.K),t.Y36(de._W),t.Y36(M.R),t.Y36(T.sK),t.Y36(C.t2),t.Y36(oe.e),t.Y36(D.E))},o.\u0275cmp=t.Xpm({type:o,selectors:[["ng-component"]],decls:2,vars:1,consts:[[4,"ngIf"],["matchHeight","sameHeight",1,"row"],["class","col-12 alert text-center","role","alert",3,"alert-secondary","alert-danger",4,"ngIf"],[1,"col-lg-8","col-12","sameHeight"],["class","effect-sadie",4,"ngIf","ngIfElse"],["elseTemplate",""],[1,"row"],[1,"col-md-6","col-12"],["class","card text-center channel-card",4,"ngIf"],["class","col-md-6 col-12",4,"ngIf"],["class","col-lg-4 col-12 sameHeight",4,"ngIf"],["role","alert",1,"col-12","alert","text-center"],[1,"effect-sadie"],[3,"source","poster","startTime","timeChange"],[1,"effect-sadie","rounded"],["type","image/avif",3,"srcset"],["alt","Video thumbnail",1,"w-100",3,"src"],["translate","",3,"translateParams"],[1,"card","text-center","channel-card"],[1,"card-content"],[1,"card-body"],[1,"row","d-flex"],[1,"col-4","align-self-center","mb-2","mb-lg-0"],["height","100px",1,"rounded-circle",3,"src"],[1,"col-8","align-self-center"],[3,"routerLink"],[1,"card-title","mb-3"],[1,"card-text"],[1,"card","text-center"],[1,"col-md-6","col-12","align-self-center","mb-2","mb-md-0"],["srcset","assets/img/logos/logo-color-big.avif","type","image/avif"],["srcset","assets/img/logos/logo-color-big.webp","type","image/webp"],["src","assets/img/logos/logo-color-big.png","alt","color-logo","height","100","width","100"],[1,"col-md-6","col-12","align-self-center"],["target","_blank","translate","",1,"btn","gradient-king-yna",3,"href"],[1,"col-lg-4","col-12","sameHeight"],[1,"card"],[1,"table-responsive"],[1,"table","m-0"],["scope","row"],["scope","row","translate",""],[3,"videoStatus"],[4,"ngIf","ngIfElse"],["elseTemplate2",""],["class","card",4,"ngIf"],["target","_blank","rel","noopener noreferrer","ngbTooltip","Go to video source!","placement","bottom",3,"href"],["placement","bottom",3,"ngbTooltip"],["translate","",1,"card-title","mb-3"],["type","button","class","btn btn-danger btn-block","translate","",3,"click",4,"ngIf"],["type","button","translate","",1,"btn","btn-danger","btn-block",3,"click"]],template:function(e,n){1&e&&(t._UZ(0,"ngx-spinner"),t.YNc(1,fn,12,6,"section",0)),2&e&&(t.xp6(1),t.Q6J("ngIf",n.video))},dependencies:[f.O5,b.yS,y._L,T.Pi,jt,j,C.Ro,f.uU],styles:[".sameHeight[_ngcontent-%COMP%]{position:relative;list-style:none}.sameHeight[_ngcontent-%COMP%]   figure[_ngcontent-%COMP%]{position:relative;overflow:hidden;min-width:auto;text-align:center;margin:15px 0}.sameHeight[_ngcontent-%COMP%]   figure[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:relative;display:block;min-height:100%;max-width:100%}.sameHeight[_ngcontent-%COMP%]   figure[_ngcontent-%COMP%]   figcaption[_ngcontent-%COMP%]{padding:2em;color:#fff;text-transform:uppercase;font-size:1.25em;-webkit-backface-visibility:hidden;backface-visibility:hidden;position:absolute;top:0;left:0;width:100%;height:100%}.sameHeight[_ngcontent-%COMP%]   figure[_ngcontent-%COMP%]   figcaption[_ngcontent-%COMP%]:before{pointer-events:none}.sameHeight[_ngcontent-%COMP%]   figure[_ngcontent-%COMP%]   figcaption[_ngcontent-%COMP%]:after{pointer-events:none}.sameHeight[_ngcontent-%COMP%]   figure[_ngcontent-%COMP%]   figcaption[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;z-index:1000;text-indent:200%;white-space:nowrap;font-size:0;opacity:0}.sameHeight[_ngcontent-%COMP%]   figure[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{word-spacing:-.15em;font-weight:300;margin:0;color:#fff;text-shadow:#000 .15em .15em .35em}.sameHeight[_ngcontent-%COMP%]   figure[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:800}.sameHeight[_ngcontent-%COMP%]   figure[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;letter-spacing:1px;font-size:68.5%}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem 1.5rem}.channel-card[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]{font-size:small}#star[_ngcontent-%COMP%]{width:4rem;height:4rem;animation:jello-horizontal 1.3s infinite both}@keyframes jello-horizontal{0%{transform:scaleZ(1)}30%{transform:scale3d(1.25,.75,1)}40%{transform:scale3d(.75,1.25,1)}50%{transform:scale3d(1.15,.85,1)}65%{transform:scale3d(.95,1.05,1)}75%{transform:scale3d(1.05,.95,1)}to{transform:scaleZ(1)}}"]}),o})();function vn(o,i){if(1&o&&t._UZ(0,"img",29),2&o){const e=t.oxw();t.Q6J("src",e.user.Picture,t.LSH)}}function _n(o,i){1&o&&(t.TgZ(0,"div",30),t._UZ(1,"i",31),t._uU(2," This is required "),t.qZA())}function wn(o,i){1&o&&(t.TgZ(0,"small",17),t._uU(1,"You can not change your email once submitted."),t.qZA())}function yn(o,i){1&o&&(t.TgZ(0,"small",32),t._uU(1,"Please contact the administrator if you need to update your email address."),t.qZA())}function Cn(o,i){1&o&&(t.TgZ(0,"div",30),t._UZ(1,"i",31),t._uU(2," The maximum is 100 characters. "),t.qZA())}const pe=function(o,i){return{"is-invalid":o,"is-valid":i}};let xn=(()=>{class o{constructor(e,n){this.userService=e,this.toastr=n,this.generalFormSubmitted=!1,this.lockEmail=!1,this.generalForm=new g.nJ({uid:new g.p4(this.userService.User.id),username:new g.p4(this.userService.User.UserName,[g.kI.required]),note:new g.p4(this.userService.User.Note,[g.kI.maxLength(100)]),email:new g.p4(this.userService.User.Email,[g.kI.email])})}ngOnInit(){this.lockEmail=this.ValidateEmail(this.userService.User.Email)}get user(){return this.userService.User}get gf(){return this.generalForm.controls}onGeneralFormSubmit(){if(this.generalFormSubmitted=!0,this.generalForm.valid){const e=this.userService.User;return e.UserName=this.gf.username.value,e.Note=this.gf.note.value,e.Email=this.gf.email.value,void this.userService.updateUser(e).subscribe(n=>{this.lockEmail=this.ValidateEmail(e.Email),this.toastr.success("Saved!","Success")})}}ValidateEmail(e){return/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(e)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(R.K),t.Y36(de._W))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-general"]],decls:46,vars:15,consts:[[1,"card"],[1,"card-content"],[1,"card-body"],[1,"tab-content"],[1,"media"],["alt","profile-img","class","rounded mr-3","height","64","width","64",3,"src",4,"ngIf"],[1,"media-body"],[1,"text-muted","mb-0","mt-1","mt-sm-0"],["translate",""],["href","https://gravatar.com/","target","_blank","rel","noopener noreferrer"],[1,"mt-1","mt-sm-2"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-12","form-group"],["for","uid"],[1,"controls"],["type","text","formControlName","uid","readonly","readonly",1,"form-control"],["translate","",1,"text-muted","text-bold-700"],["for","username","translate",""],["type","text","formControlName","username","placeholder","Valued Customer","required","",1,"form-control",3,"ngClass"],["class","help-block mt-1 text-danger",4,"ngIf"],["for","email"],["type","text","formControlName","email","placeholder","E-mail",1,"form-control",3,"readonly","ngClass"],["class","text-muted text-bold-700","translate","",4,"ngIf"],["class","text-muted","translate","",4,"ngIf"],["for","note","translate",""],["formControlName","note","placeholder","Tell us something about you...","rows","3",1,"form-control"],[1,"col-12","d-flex","flex-sm-row","flex-column","justify-content-end"],["type","submit","translate","",1,"btn","btn-primary","mr-sm-2","mb-1"],["alt","profile-img","height","64","width","64",1,"rounded","mr-3",3,"src"],[1,"help-block","mt-1","text-danger"],[1,"ft-alert-circle","align-middle"],["translate","",1,"text-muted"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"div",4),t.YNc(6,vn,1,1,"img",5),t.TgZ(7,"div",6)(8,"p",7)(9,"small",8),t._uU(10,"We grabbed your avatar from "),t.TgZ(11,"a",9),t._uU(12,"Gravatar"),t.qZA(),t._uU(13," using your email address."),t.qZA()()()(),t._UZ(14,"hr",10),t.TgZ(15,"form",11),t.NdJ("ngSubmit",function(){return n.onGeneralFormSubmit()}),t.TgZ(16,"div",12)(17,"div",13)(18,"label",14),t._uU(19,"UID"),t.qZA(),t.TgZ(20,"div",15),t._UZ(21,"input",16),t.qZA(),t.TgZ(22,"small",17),t._uU(23,"Please provide your UID to the administrator when you need help."),t.qZA()(),t.TgZ(24,"div",13)(25,"label",18),t._uU(26,"Display Name"),t.qZA(),t.TgZ(27,"div",15),t._UZ(28,"input",19),t.YNc(29,_n,3,0,"div",20),t.qZA()(),t.TgZ(30,"div",13)(31,"label",21),t._uU(32,"E-mail"),t.qZA(),t.TgZ(33,"div",15),t._UZ(34,"input",22),t.qZA(),t.YNc(35,wn,2,0,"small",23),t.YNc(36,yn,2,0,"small",24),t.qZA(),t.TgZ(37,"div",13)(38,"label",25),t._uU(39,"Note"),t.qZA(),t.TgZ(40,"div",15),t._UZ(41,"textarea",26),t.YNc(42,Cn,3,0,"div",20),t.qZA()(),t.TgZ(43,"div",27)(44,"button",28),t._uU(45," Save Changes "),t.qZA()()()()()()()()()),2&e&&(t.xp6(6),t.Q6J("ngIf",n.user.Picture),t.xp6(9),t.Q6J("formGroup",n.generalForm),t.xp6(13),t.Q6J("ngClass",t.WLB(9,pe,n.generalFormSubmitted&&n.gf.username.invalid,n.generalFormSubmitted&&!n.gf.username.invalid)),t.xp6(1),t.Q6J("ngIf",n.generalFormSubmitted&&(n.gf.username.invalid||(null==n.gf.username.errors?null:n.gf.username.errors.required))),t.xp6(5),t.Q6J("readonly",n.lockEmail)("ngClass",t.WLB(12,pe,n.generalFormSubmitted&&n.gf.email.invalid,n.generalFormSubmitted&&!n.gf.email.invalid)),t.xp6(1),t.Q6J("ngIf",!n.lockEmail),t.xp6(1),t.Q6J("ngIf",n.lockEmail),t.xp6(6),t.Q6J("ngIf",n.generalFormSubmitted&&(n.gf.note.invalid||(null==n.gf.note.errors?null:n.gf.note.errors.maxlength))))},dependencies:[f.mk,f.O5,T.Pi,g._Y,g.Fj,g.JJ,g.JL,g.Q7,g.sg,g.u]}),o})();const A=function(o){return{active:o}};function Tn(o,i){if(1&o&&t._UZ(0,"app-general",14),2&o){const e=t.oxw();t.Q6J("ngClass",t.VKq(1,A,"general"===e.activeTab))}}function Sn(o,i){if(1&o&&t._UZ(0,"app-support-token",15),2&o){const e=t.oxw();t.Q6J("ngClass",t.VKq(1,A,"support-token"===e.activeTab))}}function Dn(o,i){if(1&o&&t._UZ(0,"app-download-token",16),2&o){const e=t.oxw();t.Q6J("ngClass",t.VKq(1,A,"download-token"===e.activeTab))}}function In(o,i){if(1&o&&t._UZ(0,"app-referral-program",17),2&o){const e=t.oxw();t.Q6J("ngClass",t.VKq(1,A,"referral-program"===e.activeTab))}}const Pn=function(){return["/account-settings"]};let he=(()=>{class o{constructor(e,n,r){this.route=e,this.router=n,this.metaService=r,this.activeTab="general",this.alertVisible=!0,this.socialForm=new g.nJ({twitter:new g.p4(""),facebook:new g.p4(""),googlePlus:new g.p4(""),linkedin:new g.p4(""),instagram:new g.p4(""),quora:new g.p4("")})}ngOnInit(){this.route.paramMap.subscribe(e=>this.setActiveTab(e.get("tab")??"general")),this.metaService.resetToDefault()}setActiveTab(e){this.activeTab=e}onSocialFormSubmit(){}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(b.gz),t.Y36(b.F0),t.Y36(M.R))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-account-settings"]],decls:17,vars:9,consts:[[1,"row"],[1,"col-12"],["translate","",1,"content-header"],[1,"col-md-3","mt-3"],["id","myTab","role","tablist",1,"nav","flex-column","nav-pills"],[1,"nav-item"],["id","general-tab","data-toggle","tab","role","tab","aria-controls","general","aria-selected","true",1,"nav-link",3,"routerLink","ngClass","click"],[1,"ft-settings","mr-1","align-middle"],["translate","",1,"align-middle"],[1,"col-md-9"],["class","tab-pane","id","general","role","tabpanel","aria-labelledby","general-tab",3,"ngClass",4,"ngIf"],["class","tab-pane","id","support-token","role","tabpanel","aria-labelledby","support-token-tab",3,"ngClass",4,"ngIf"],["class","tab-pane","id","download-token","role","tabpanel","aria-labelledby","download-token-tab",3,"ngClass",4,"ngIf"],["class","tab-pane","id","referral-program","role","tabpanel","aria-labelledby","referral-program-tab",3,"ngClass",4,"ngIf"],["id","general","role","tabpanel","aria-labelledby","general-tab",1,"tab-pane",3,"ngClass"],["id","support-token","role","tabpanel","aria-labelledby","support-token-tab",1,"tab-pane",3,"ngClass"],["id","download-token","role","tabpanel","aria-labelledby","download-token-tab",1,"tab-pane",3,"ngClass"],["id","referral-program","role","tabpanel","aria-labelledby","referral-program-tab",1,"tab-pane",3,"ngClass"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3,"Account Settings"),t.qZA()()(),t.TgZ(4,"div",0)(5,"div",3)(6,"ul",4)(7,"li",5)(8,"a",6),t.NdJ("click",function(){return n.setActiveTab("general")}),t._UZ(9,"i",7),t.TgZ(10,"span",8),t._uU(11,"General"),t.qZA()()()()(),t.TgZ(12,"div",9),t.YNc(13,Tn,1,3,"app-general",10),t.YNc(14,Sn,1,3,"app-support-token",11),t.YNc(15,Dn,1,3,"app-download-token",12),t.YNc(16,In,1,3,"app-referral-program",13),t.qZA()()),2&e&&(t.xp6(8),t.Q6J("routerLink",t.DdM(6,Pn))("ngClass",t.VKq(7,A,"general"===n.activeTab)),t.xp6(5),t.Q6J("ngIf","general"===n.activeTab),t.xp6(1),t.Q6J("ngIf","support-token"===n.activeTab),t.xp6(1),t.Q6J("ngIf","download-token"===n.activeTab),t.xp6(1),t.Q6J("ngIf","referral-program"===n.activeTab))},dependencies:[f.mk,f.O5,b.yS,T.Pi,xn],styles:[".alert-light-warning{background-color:#feefd0!important;color:#f77e17!important;border-color:#feefd0}.media{align-items:center}\n",".ng-dropdown-panel .ng-dropdown-panel-items .ng-option img{margin-right:.7rem}.ng-dropdown-panel .ng-dropdown-panel-items .ng-option img+b{vertical-align:middle}.ng-dropdown-panel .ng-dropdown-panel-items .ng-option.ng-option-marked,.ng-dropdown-panel .ng-dropdown-panel-items .ng-option-selected{background-color:#975aff!important;color:#fff!important}.ng-select .ng-select-container{background-color:transparent!important;border-color:#e0e0e0;border-radius:.35rem;color:#342e49}.ng-select .ng-dropdown-panel{border-color:#e0e0e0;box-shadow:none;margin:0}.ng-select.ng-select-opened>.ng-select-container{border-color:#975aff!important}.ng-select.ng-select-focused:not(.ng-select-opened)>.ng-select-container{border-color:#975aff;box-shadow:none}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-value{background-color:#975aff;color:#fff;border-radius:.35rem}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-value .ng-value-icon{border:1px solid #7441DB;border-right:0!important;border-top-left-radius:.35rem;border-bottom-left-radius:.35rem;padding:1px 0 1px 5px}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-value .ng-value-icon:hover{background-color:inherit}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-value .ng-value-label{border:1px solid #7441DB;border-left:0!important;border-top-right-radius:.35rem;border-bottom-right-radius:.35rem}html body.layout-dark:not(.layout-transparent) .ng-select .ng-select-container{border-color:#474748;color:#b2b1b5}html body.layout-dark:not(.layout-transparent) .ng-select .ng-select-container .ng-input>input::-moz-placeholder{color:#b2b1b5}html body.layout-dark:not(.layout-transparent) .ng-select .ng-select-container .ng-input>input,html body.layout-dark:not(.layout-transparent) .ng-select .ng-select-container .ng-input>input::placeholder{color:#b2b1b5}html body.layout-dark.layout-transparent .ng-select .ng-select-container{border-color:#eee3;color:#d6d5d8}html body.layout-dark.layout-transparent .ng-select .ng-select-container .ng-input>input::-moz-placeholder{color:#d6d5d8}html body.layout-dark.layout-transparent .ng-select .ng-select-container .ng-input>input,html body.layout-dark.layout-transparent .ng-select .ng-select-container .ng-input>input::placeholder{color:#d6d5d8}html body.layout-dark .ng-dropdown-panel{border-color:#474748}html body.layout-dark .ng-dropdown-panel .ng-dropdown-panel-items .ng-option{background-color:#2e333b;color:#b2b1b5}html body.layout-dark .ng-dropdown-panel .ng-dropdown-panel-items .ng-option.ng-option-disabled{color:#626164}html body.layout-dark .ng-dropdown-panel .ng-optgroup.ng-option-disabled{background-color:#2e333b;color:#626164}html body.layout-dark .ng-dropdown-panel .ng-dropdown-header,html body.layout-dark .ng-dropdown-panel .ng-dropdown-footer{background-color:#22272e;color:#626164;border-color:#474748}\n"],encapsulation:2}),o})();var kn=h(2174),ge=h(5233);const Mn=[{path:"",component:It,data:{title:"Home",breadcrumb:[{label:"Home",url:""}]}},{path:"videos",component:U,data:{title:"Videos",breadcrumb:[{label:"Home",url:"/"},{label:"Videos",url:""}]}},{path:"channels",component:$t,data:{title:"Channels",breadcrumb:[{label:"Home",url:"/"},{label:"Channels",url:""}]}},{path:"channels/:channelId",component:Zt,data:{title:"Channel",breadcrumb:[{label:"Home",url:"/"},{label:"Channels",url:"/channels"},{label:"{{ChannelName}}",url:""}]}},{path:"channels/:channelId/videos/:id",component:bn,data:{title:"Video",breadcrumb:[{label:"Home",url:"/"},{label:"Channels",url:"/channels"},{label:"{{ChannelName}}",url:"/channels/:channelId"},{label:"{{VideoId}}",url:""}]}},{path:"account-settings",component:he,data:{title:"Account Settings",breadcrumb:[{label:"Home",url:"/"},{label:"Account Settings",url:""}]},canActivate:[ge.a]},{path:"account-settings/:tab",component:he,data:{title:"Account Settings",breadcrumb:[{label:"Home",url:"/"},{label:"Account Settings",url:""}]},canActivate:[ge.a]},{path:"faq",component:kn.v,data:{title:"FAQ",breadcrumb:[{label:"Home",url:"/"},{label:"FAQ",url:""}]}},{path:"login",redirectTo:"/pages/login",pathMatch:"full"}];let Hn=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[b.Bz.forChild(Mn),b.Bz]}),o})();var Rn=h(4873);let An=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[f.ez,Hn,me,Rn.m,g.u5,g.UX,lt,dt.kz,C.ef.forRoot({type:"ball-triangle-path"})]}),o})()}}]);